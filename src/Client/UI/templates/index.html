{% extends "layout.html" %}

{% block head %}
{{ super() }}

    <link rel = "stylesheet" type = "text/css" href = "{{ url_for('static', filename = 'css/catalogue.css') + anti_cache }}">

    <script  type = "text/javascript" src = "{{ url_for('static', filename = 'js/async_requests.js') + anti_cache }}">
    </script>

    <script  type = "text/javascript" src = "{{ url_for('static', filename = 'js/manipulations.js') + anti_cache }}">
    </script>

    <script  type = "text/javascript" src = "{{ url_for('static', filename = 'js/catalogue.js') + anti_cache }}" type = "module">
    </script>

 {% endblock %}
{% block main_content %}
{{ super() }}

<div align=center>

    <div class = "catalogue_toolbox" id = "catalogue_toolbox_add_model" style = "display: flex;">

        <div align = "left" class = "left_column_align_left">
            <b class = "guideline">Pick a folder containing your model:</b><br>
            <button onclick = "asyncPostRequest('/folders', '~', 'new_model_path');">
                Browse
            </button>
            <br><br>

            <div id = "new_model_path">
            </div>

            <br><br>
            <input class = "catalogue_toolbox_text_input" type = "text" name = "new_model_name" id = "new_model_name"
            placeholder = "New model name..." required>
        </div>

        <div align = right class = "right_column_align_right">
            <button class = "catalogue_button" name = "catalogue_cancel_adding" id = "catalogue_cancel_adding_button"
            onclick = "onCancelNewModelSubmitButtonClick();">
                <b>Cancel</b>
            </button>
            &nbsp;
            <button class = "catalogue_button" name = "catalogue_submit_model" id = "catalogue_submit_model_button">
                <b>Add</b>
            </button>
        </div>

    </div>

    <div class = "catalogue_toolbox" id = "catalogue_toolbox_regular">

        <div align = "left" class = "left_column_align_left">
            <input class = "catalogue_toolbox_text_input" name = "catalogue_search" id = "catalogue_searchsearch" type = text
            placeholder = "Search..." autofocus>
        </div>

        <div align = "right" class = "right_column_align_right">
            <button class = "catalogue_button" name = "catalogue_add" id = "catalogue_invoke_add_button"
            onclick="onAddInvocationButtonClick();">
                <b>+</b> Add a model
            </button>
        </div>

    </div>

</div>

<div class = "catalogue_content">
    <ol class = "catalogue_models_list">
        <table width = "100%">
        {% for item in models_list %}
        <tr>
            <td class = "catalogue_models_list_item" width = "60%">
                <li>
                    <a class = "catalogue_model_list_item_name"  id = "model{{ item['id'] }}" 
                    href = "{{ url_for('dashboard', model_id = item['id']) }}">
                        {{ item["name"] }}
                    </a>
                </li>
            </td>
            <td class = "catalogue_model_list_item_version" align = "right">
                v. {{ item["version"] }} 
            </td>
            <td class = "catalogue_model_list_item_timestamp">
                {{ item["timestamp"] }}
            </td>
        </tr>
        <tr>
            <td colspan="3" class = "catalogue_model_list_item_path">
                {{item["path"]}}
            </td>
        </tr>
        {% endfor %}
    </table>
    </ol>
</div>

{% endblock %}